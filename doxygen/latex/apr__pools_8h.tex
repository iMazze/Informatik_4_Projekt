\hypertarget{apr__pools_8h}{}\section{C\+:/\+Users/\+Maximilian Klug/\+Desktop/\+Informatik\+\_\+4\+\_\+\+Projekt/\+Source/complex\+\_\+calculator/packages/libapr.1.4.6.1/build/native/include/apr\+\_\+pools.h File Reference}
\label{apr__pools_8h}\index{C\+:/\+Users/\+Maximilian Klug/\+Desktop/\+Informatik\+\_\+4\+\_\+\+Projekt/\+Source/complex\+\_\+calculator/packages/libapr.\+1.\+4.\+6.\+1/build/native/include/apr\+\_\+pools.\+h@{C\+:/\+Users/\+Maximilian Klug/\+Desktop/\+Informatik\+\_\+4\+\_\+\+Projekt/\+Source/complex\+\_\+calculator/packages/libapr.\+1.\+4.\+6.\+1/build/native/include/apr\+\_\+pools.\+h}}


A\+PR memory allocation.  


{\ttfamily \#include \char`\"{}apr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}apr\+\_\+errno.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}apr\+\_\+general.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}apr\+\_\+want.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}apr\+\_\+allocator.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}}
\item 
\#define \mbox{\hyperlink{group__apr__pools_ga89ce1d55c7f0c39ea87c88eabd655394}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+A\+C\+C\+E\+S\+S\+OR}}(type)
\item 
\#define \mbox{\hyperlink{group__apr__pools_ga43a8a52f68f8b7d3b7694c254da4a074}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+I\+M\+P\+L\+E\+M\+E\+N\+T\+\_\+\+A\+C\+C\+E\+S\+S\+OR}}(type)
\item 
\#define \mbox{\hyperlink{group__apr__pools_gac81cff34d0ff4be52fa924663478eade}{A\+P\+R\+\_\+\+P\+O\+O\+L\+\_\+\+\_\+\+F\+I\+L\+E\+\_\+\+L\+I\+N\+E\+\_\+\+\_\+}}~\+\_\+\+\_\+\+F\+I\+L\+E\+\_\+\+\_\+ \char`\"{}\+:\char`\"{} \mbox{\hyperlink{apr__version_8h_ae90215615972dfa4108018304361ef0b}{A\+P\+R\+\_\+\+S\+T\+R\+I\+N\+G\+I\+FY}}(\+\_\+\+\_\+\+L\+I\+N\+E\+\_\+\+\_\+)
\item 
\#define \mbox{\hyperlink{group__apr__pools_gaa7c40921aae156b665e82b0a66991a39}{apr\+\_\+pool\+\_\+create}}(newpool,  parent)~apr\+\_\+pool\+\_\+create\+\_\+ex(newpool, parent, N\+U\+LL, N\+U\+LL)
\item 
\#define \mbox{\hyperlink{group__apr__pools_gac5b45d10dd235432a214079792714226}{apr\+\_\+pool\+\_\+create\+\_\+core}}(newpool)~apr\+\_\+pool\+\_\+create\+\_\+unmanaged\+\_\+ex(newpool, N\+U\+LL, N\+U\+LL)
\item 
\#define {\bfseries apr\+\_\+pool\+\_\+create\+\_\+unmanaged}(newpool)~apr\+\_\+pool\+\_\+create\+\_\+unmanaged\+\_\+ex(newpool, N\+U\+LL, N\+U\+LL)
\item 
\#define \mbox{\hyperlink{group__apr__pools_gad214fc0160de3c22b6435e29ea20fce8}{apr\+\_\+pcalloc}}(p,  size)~memset(apr\+\_\+palloc(p, size), 0, size)
\item 
\#define {\bfseries apr\+\_\+pool\+\_\+join}(a,  b)
\item 
\#define {\bfseries apr\+\_\+pool\+\_\+lock}(pool,  lock)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} \mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}}
\item 
typedef int($\ast$ \mbox{\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}}) (int retcode)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__apr__pools_ga95a4b4050d59535eea61951c649d49e6}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (\mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}) apr\+\_\+pool\+\_\+initialize(void)
\item 
\mbox{\hyperlink{group__apr__pools_gac01d61b42e8b6e65b0da64d18ce146ac}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (void) apr\+\_\+pool\+\_\+terminate(void)
\item 
\mbox{\hyperlink{group__apr__pools_ga0db3e36b392c39302ec1012e821d20ea}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (\mbox{\hyperlink{group__apr__allocator_ga1ceabfd30fcfc455e47d052d2a24244b}{apr\+\_\+allocator\+\_\+t}} $\ast$) apr\+\_\+pool\+\_\+allocator\+\_\+get(\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$pool)
\item 
\mbox{\hyperlink{group__apr__pools_ga7cb63e2c63fd7769ce05b8bd5d82b833}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (void $\ast$) apr\+\_\+palloc(\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$p
\item 
\mbox{\hyperlink{group__apr__pools_ga5f3a919f1753c62a727235bc397d8ae3}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (\mbox{\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}}) apr\+\_\+pool\+\_\+abort\+\_\+get(\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$pool)
\item 
\mbox{\hyperlink{group__apr__pools_ga514eba9e7f17bad2eb7a034c5b65352e}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+RE}} (\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$) apr\+\_\+pool\+\_\+parent\+\_\+get(\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$pool)
\item 
\mbox{\hyperlink{group___pool_cleanup_ga18235426bac93f23261221f9b3733bfd}{A\+P\+R\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+N\+O\+N\+S\+TD}} (\mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}) apr\+\_\+pool\+\_\+cleanup\+\_\+null(void $\ast$data)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$ {\bfseries parent}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} \mbox{\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}} {\bfseries abort\+\_\+fn}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} \mbox{\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}} \mbox{\hyperlink{group__apr__allocator_ga1ceabfd30fcfc455e47d052d2a24244b}{apr\+\_\+allocator\+\_\+t}} $\ast$ {\bfseries allocator}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} \mbox{\hyperlink{group__apr__pools_ga370a939349adf6d1438068e2fc69a0dd}{apr\+\_\+abortfunc\+\_\+t}} \mbox{\hyperlink{group__apr__allocator_ga1ceabfd30fcfc455e47d052d2a24244b}{apr\+\_\+allocator\+\_\+t}} const char $\ast$ {\bfseries file\+\_\+line}
\item 
apr\+\_\+size\+\_\+t {\bfseries size}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$ {\bfseries pool}
\item 
\mbox{\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\+\_\+pool\+\_\+t}} $\ast$ {\bfseries b}
\item 
const char $\ast$ {\bfseries tag}
\item 
const char $\ast$ {\bfseries key}
\item 
const char \mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}($\ast$ {\bfseries cleanup} )(void $\ast$)
\item 
const void $\ast$ {\bfseries data}
\item 
const void \mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}($\ast$ {\bfseries plain\+\_\+cleanup} )(void $\ast$)
\item 
const void \mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}($\ast$) \mbox{\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\+\_\+status\+\_\+t}}($\ast$ {\bfseries child\+\_\+cleanup} )(void $\ast$))
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\+PR memory allocation. 

Resource allocation routines...

designed so that we don\textquotesingle{}t have to keep track of E\+V\+E\+R\+Y\+T\+H\+I\+NG so that it can be explicitly freed later (a fundamentally unsound strategy --- particularly in the presence of die()).

Instead, we maintain pools, and allocate items (both memory and I/O handlers) from the pools --- currently there are two, one for per-\/transaction info, and one for config info. When a transaction is over, we can delete everything in the per-\/transaction apr\+\_\+pool\+\_\+t without fear, and without thinking too hard about it either.

Note that most operations on pools are not thread-\/safe\+: a single pool should only be accessed by a single thread at any given time. The one exception to this rule is creating a subpool of a given pool\+: one or more threads can safely create subpools at the same time that another thread accesses the parent pool. 

\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}\label{apr__pools_8h_a26faf43e3f61783d8b7aa928c0a41a11}} 
\index{apr\+\_\+pools.\+h@{apr\+\_\+pools.\+h}!A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}}
\index{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC@{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}!apr\+\_\+pools.\+h@{apr\+\_\+pools.\+h}}
\subsubsection{\texorpdfstring{A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}{APR\_WANT\_MEMFUNC}}
{\footnotesize\ttfamily \#define A\+P\+R\+\_\+\+W\+A\+N\+T\+\_\+\+M\+E\+M\+F\+U\+NC}

for no good reason? 